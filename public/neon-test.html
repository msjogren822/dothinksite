<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Neon Connector Test</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; }
    #status { margin-top: 1rem; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>Neon Connectivity Test</h1>
  <button id="ping">Ping Neon</button>
  <div id="status">Not yet pinged</div>

  <script>
    document.getElementById('ping').onclick = async () => {
      const s = document.getElementById('status');
      s.textContent = 'Pinging…';
      try {
        const res = await fetch('/.netlify/functions/neon-connect');
        const j  = await res.json();
        if (!res.ok) throw new Error(j.error || res.statusText);
        if (j.row) {
          s.textContent = `✅ Success! Latest row: ${JSON.stringify(j.row)}`;
        } else {
          s.textContent = '⚠️ Success but no rows found (table empty).';
        }
      } catch (err) {
        s.textContent = `❌ Error: ${err.message}`;
      }
    };
  </script>
</body>
</html>
