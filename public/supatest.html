<!-- 1) Load the library -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- 2) Initialize your client -->
<script>
  const sbClient = supabase.createClient(
    window.env.SUPABASE_URL,
    window.env.SUPABASE_ANON_KEY
  );
  // Optionally attach to window so all scripts see it:
  window.sbClient = sbClient;
</script>

<!-- 3) Then—and only then—ping your database -->
<script>
  // Using the non-shadowing name:
  window.sbClient
    .rpc('now')
    .then(({ data, error }) => {
      if (error) console.error('Supabase RPC error', error);
      else console.log('✅ Supabase live, server time:', data);
    });
</script>
