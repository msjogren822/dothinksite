<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Supabase Test</title>
</head>
<body>
  <h1>Supabase Test2</h1>
  <!-- 1) Load the Supabase client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- 2) Initialize after Netlify injects window.env -->
  <script>
    // If window.env is undefined, you're not running via Netlify:
    if (!window.env) {
      console.error('❌ window.env is undefined – run via Netlify (netlify dev or deploy).');
    } else {
      // Create client under a non-shadowing name
      const sb = supabase.createClient(
        window.env.SUPABASE_URL,
        window.env.SUPABASE_ANON_KEY
      );

      // 3) Ping the DB
      sb.rpc('now')
        .then(({ data, error }) => {
          if (error) console.error('Supabase RPC error:', error);
          else console.log('✅ Supabase live! Server time:', data);
        });
    }
  </script>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  // ⚠️ Hard-coded for testing only — remove these values afterward!
  const sb = supabase.createClient(
    'https://dqxeoablgvqaessahzwm.supabase.co',
    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRxeGVvYWJsZ3ZxYWVzc2FoendtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQxODQxNjIsImV4cCI6MjA2OTc2MDE2Mn0.dINhv4hZ4nyUNnt1DNiTj4swL-L2P9OQDBVZeD7AlF8'
  );
  sb.rpc('now')
    .then(({ data, error }) => {
      if (error) console.error('Supabase ping error:', error);
      else console.log('✅ Supabase live! Server time:', data);
    });
</script>
  
</body>
</html>
